{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cozy Home Furniture</title>
  <link rel="stylesheet" href="{% static 'furniture/css/home.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="container">
      <header>
        <h1>Shopping</h1>
        <div class="shopping">
          <a href="{% url 'view_cart' %}">
            <i class="fa-solid fa-bag-shopping"></i>
            <span id="cart-count">{{ cart_item_count }}</span>
          </a>
        </div>

        <div class="auth-links">
          {% if user.is_authenticated %}
            Hi, {{ user.username }} |
            <form method="post" action="{% url 'logout' %}" style="display:inline;">
              {% csrf_token %}
                <button type="submit" style="background:none;border:none;padding:0;color:blue;cursor:pointer;">
                  Logout
                </button>
            </form>
          {% else %}
            <a href="{% url 'login' %}">Login</a> | <a href="{% url 'signup' %}">Sign Up</a>
          {% endif %}
        </div>
      </header>

      <div class="list"></div>
    </div>

    {% comment %} <div class="card">
      <h1>Card</h1>
      <ul class="listCard"></ul>
      <div class="checkOut">
        <div class="total">0</div>
        <div class="closeShopping">Close</div>
      </div>
    </div> {% endcomment %}
    
  <section class="hero">
    <h1>Comfortable Furniture</h1>
    <h4>Find the perfect furniture for your space.</h4>
  </section>

  <section id="categories">
    <h2>Our Sections</h2>
    <div class="flexbox">

      <!-- chairs -->
      <a href="{% url 'chairs' %}" class="category">
        <img src="{% static 'furniture/imagez/chair.jpg' %}" alt="Chairs">
        <h1>Chairs</h1>
      </a>

        <!-- sofas -->
      <a href="{% url 'sofas' %}" class="category">
        <img src="{% static 'furniture/imagez/sofa.webp' %}" alt="Sofas">
        <h1>Sofas</h1>
      </a>

        <!-- tables -->
      <a href="sections/tables/tables.html" class="category">
        <img src="{% static 'furniture/imagez/table.webp' %}" alt="Tables">
        <h1>Tables</h1>
      </a>

        <!-- beds -->
      <a href="sections/beds/beds.html" class="category">
        <img src="{% static 'furniture/imagez/bed.jpg' %}" alt="Beds">
        <h1>Beds</h1>
      </a>
        
        <!-- lamps -->
      <a href="sections/lamps/lamps.html" class="category">
        <img src="{% static 'furniture/imagez/lamp.jpg' %}" alt="Lamps">
        <h1>Lamps</h1>
      </a>
        

        <!-- desks -->
      <a href="sections/desks/desks.html" class="category">
        <img src="{% static 'furniture/imagez/desk.jpg' %}" alt="Desks">
        <h1>Desks</h1>
      </a>
        
        <!-- paintings -->
      <a href="sections/paintings/paintings.html" class="category">
        <img src="{% static 'furniture/imagez/painting.webp' %}" alt="Paintings">
        <h1>Paintings</h1>
      </a>
        
        <!-- doors -->
      <a href="sections/doors/doors.html" class="category">
        <img src="{% static 'furniture/imagez/door.webp' %}" alt="Doors">
        <h1>Doors</h1>
      </a>

        <!-- curtains -->
      <a href="sections/curtains/curtains.html" class="category">
        <img src="{% static 'furniture/imagez/curtain.jpg' %}" alt="Curtains">
        <h1>Curtains</h1>
      </a>

    </div>
  </section>

  <section id="about">
    <h2>About Us</h2>
    <p>We offer stylish, comfortable, and affordable furniture for every home.</p>
  </section>

  <section id="contact">
    <h2>Contact</h2>
    <p>Email us at: contact@cozyhome.com</p>
  </section>

  <footer>
    <p>&copy; 2025 Cozy Home Furniture</p>
  </footer>

   <body>
  ...
  {% comment %} <div class="shopping">
    <a href="{% url 'view_cart' %}">
      <i class="fa-solid fa-bag-shopping"></i>
      <span id="cart-count">{{ cart_item_count }}</span>
    </a>
  </div> {% endcomment %}
  ...

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const cartCountEl = document.querySelector('#cart-count');

      function updateCartCount() {
          fetch('/cart/count/')
              .then(res => res.json())
              .then(data => {
                  cartCountEl.textContent = data.cart_count;
                  localStorage.setItem('cart_count', data.cart_count);
              });
      }

      if (cartCountEl) {
          // Initial load
          updateCartCount();
        
          // Update when user comes back to tab
          document.addEventListener('visibilitychange', () => {
              if (!document.hidden) {
                  updateCartCount();
              }
          });
      }
    });
  </script>

</body>
</html>